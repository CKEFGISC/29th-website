{"ast":null,"code":"import React from\"react\";import\"../News.scss\";import Loading from\"../../../utils/Loading\";import{switchPageAnimation}from\"../../../utils/Page\";import contentPath from\"../content.md\";import{useNavigate}from\"react-router-dom\";import Markdown from\"../../../utils/Remarkable\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function handle(textContent,setText,goTo){var rawNews=textContent.split(\"<%-== next ==-%>\");var news=[];for(let i=rawNews.length-1;i>=0;--i){var lines=rawNews[i].trim().split(/\\r\\n|\\r|\\n/g);var title=lines[0];if(title.startsWith(\"# \"))title=title.slice(2);else{title=\"Untitled\";lines.unshift(\"# Untitled\");}news.push(/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"h3\",{style:{cursor:\"pointer\"},onClick:()=>goTo(\"\".concat(i)),children:[/*#__PURE__*/_jsx(\"span\",{className:\"opacity-50\",children:\"#\".concat(i)}),\"\\xA0\",/*#__PURE__*/_jsx(Markdown,{content:title,inline:true})]}),/*#__PURE__*/_jsx(\"hr\",{})]},\"news-\".concat(i)));}setText(news);}function PageItem(props){return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"page-link\",children:/*#__PURE__*/_jsx(\"span\",{children:props.children})})});}export default function NewsList(){const goTo=useNavigate();const[text,setText]=React.useState();React.useEffect(()=>{switchPageAnimation();fetch(contentPath).then(response=>response.text()).then(textContent=>handle(textContent,setText,goTo));},[goTo]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{id:\"title-bar\",children:\"\\u6700\\u65B0\\u6D88\\u606F\"}),/*#__PURE__*/_jsx(\"section\",{id:\"list-news\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"news-list\",children:text||/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"100dvh\"}})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",width:\"100%\"},children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(PageItem,{children:\"\\xAB\"}),/*#__PURE__*/_jsx(PageItem,{children:\"1\"}),/*#__PURE__*/_jsx(PageItem,{children:\"\\xBB\"})]})})})]})})]});}","map":{"version":3,"names":["React","Loading","switchPageAnimation","contentPath","useNavigate","Markdown","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","handle","textContent","setText","goTo","rawNews","split","news","i","length","lines","trim","title","startsWith","slice","unshift","push","children","style","cursor","onClick","concat","className","content","inline","PageItem","props","NewsList","text","useState","useEffect","fetch","then","response","id","height","display","justifyContent","width"],"sources":["/home/demonaarwu/projects/29th-website/src/pages/news/pages/List.js"],"sourcesContent":["import React from \"react\";\n\nimport \"../News.scss\"; \n\nimport Loading from \"../../../utils/Loading\";\nimport { switchPageAnimation } from \"../../../utils/Page\";\n\nimport contentPath from \"../content.md\";\nimport { useNavigate } from \"react-router-dom\";\nimport Markdown from \"../../../utils/Remarkable\";\n\nfunction handle(textContent, setText, goTo) {\n  var rawNews = textContent.split(\"<%-== next ==-%>\");\n\n  var news = [];\n  for (let i = rawNews.length - 1; i >=0; --i) {\n    var lines = rawNews[i].trim().split(/\\r\\n|\\r|\\n/g);\n\n    var title = lines[0];\n    if (title.startsWith(\"# \")) \n      title = title.slice(2);\n    else {\n      title = \"Untitled\"\n      lines.unshift(\"# Untitled\");\n    }\n\n    news.push(<React.Fragment key={`news-${i}`}>\n      <h3 style={{ cursor: \"pointer\" }} onClick={() => goTo(`${i}`)}>\n        <span className=\"opacity-50\">{`#${i}`}</span>&nbsp;<Markdown content={title} inline={true} />\n      </h3>\n      <hr />\n    </React.Fragment>);\n  }\n\n  setText(news);\n}\n\nfunction PageItem(props) {\n  return (\n    <li className=\"page-item\" style={{ cursor: \"pointer\" }}>\n      <span className=\"page-link\">\n        <span>{props.children}</span>\n      </span>\n    </li>\n  )\n}\n\nexport default function NewsList() {\n  const goTo = useNavigate();\n\n  const [text, setText] = React.useState();\n\n  React.useEffect(() => {\n    switchPageAnimation();\n\n    fetch(contentPath)\n      .then(response => response.text())\n      .then(textContent => handle(textContent, setText, goTo));\n  }, [ goTo ]);\n\n  return (<>\n    <section id=\"title-bar\">最新消息</section>\n    <section id=\"list-news\">\n      <div className=\"container\">\n        <div className=\"news-list\">\n          {text || <><Loading /><div style={{ height: \"100dvh\" }}></div></>}\n        </div>\n        <div style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}>\n          <nav aria-label=\"Page navigation example\">\n            <ul className=\"pagination\">\n              <PageItem>&laquo;</PageItem>\n              <PageItem>1</PageItem>\n              <PageItem>&raquo;</PageItem>\n            </ul>\n          </nav>\n        </div>\n      </div>\n    </section>\n  </>);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}